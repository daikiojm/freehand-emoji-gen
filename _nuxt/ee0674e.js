(window.webpackJsonp=window.webpackJsonp||[]).push([[8,4],{367:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));n(14),n(11),n(16),n(24),n(15),n(25);var r=n(4);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var c=[{title:"線の太さ (size)",key:"size",step:0,min:1,max:50},{title:"オプション1 (thinning)",key:"thinning",step:0,min:-1,max:1},{title:"オプション2 (smoothing)",key:"smoothing",step:0,min:0,max:1},{title:"オプション3 (streamline)",key:"streamline",step:0,min:0,max:1}],l=function(){return function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},{freehandCanvasWidth:500,freehandCanvasHeight:500,outputImageWidth:128,outputImageHeight:128,outputImageExtension:"png",outputImageDefaultName:"image_freehand",swatches:[["#000000FF"],["#FFFFFFFF"],["#3AB0C7"],["#38BA91"],["#EC71A1"],["#EAA822"],["#1111FF"],["#00BB00"],["#FF0000"],["#00000000"]],strokeOptions:c})}},369:function(t,e,n){"use strict";n.r(e);var r=n(22),o=n(367),c=Object(r.b)({props:{value:{type:String,default:"#000000FF"}},setup:function(t,e){var n=e.emit,c=Object(o.a)().swatches;return{color:Object(r.a)({get:function(){return t.value},set:function(t){return n("input",t)}}),vuetifyProps:{canvasHeight:100,width:280,dotSize:10,hideInputs:!0,mode:"hexa",showSwatches:!0,swatches:c}}}}),l=n(49),f=n(67),d=n.n(f),v=n(427),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("v-color-picker",t._b({staticClass:"mx-0 my-4",model:{value:t.color,callback:function(e){t.color=e},expression:"color"}},"v-color-picker",t.vuetifyProps,!1))}),[],!1,null,null,null);e.default=component.exports;d()(component,{VColorPicker:v.a})},370:function(t,e,n){"use strict";n.r(e);var r=n(22),o=Object(r.b)({props:{value:{type:String,default:"stroke"}},setup:function(t,e){var n=e.emit;return{toggle:Object(r.a)({get:function(){return"stroke"===t.value?0:1},set:function(t){return n("input",0===t?"stroke":"background")}})}}}),c=n(49),l=n(67),f=n.n(l),d=n(353),v=n(400),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn-toggle",{attrs:{dense:""},model:{value:t.toggle,callback:function(e){t.toggle=e},expression:"toggle"}},[n("v-btn",[t._v("線")]),t._v(" "),n("v-btn",[t._v("背景")])],1)}),[],!1,null,null,null);e.default=component.exports;f()(component,{VBtn:d.a,VBtnToggle:v.a})},371:function(t,e,n){var content=n(388);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(33).default)("3b91e1da",content,!0,{sourceMap:!1})},379:function(t,e,n){var content=n(392);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(33).default)("2302692f",content,!0,{sourceMap:!1})},381:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return l}));n(11),n(51),n(17);var r=n(22),o=function(){return{svgElement:Object(r.g)()}},c=Symbol("svgRef"),l=function(){var t=Object(r.d)(c);if(!t)throw new Error("".concat(c," is not provided"));return t}},387:function(t,e,n){"use strict";n(371)},388:function(t,e,n){var r=n(32)(!1);r.push([t.i,"svg[data-v-16aed6a5]{width:100%;height:100%;touch-action:none}.svg-container[data-v-16aed6a5]{position:relative}",""]),t.exports=r},391:function(t,e,n){"use strict";n(379)},392:function(t,e,n){var r=n(32)(!1);r.push([t.i,".controls-container[data-v-eeb6e178]{position:relative}.controls-container .setting-reset-button[data-v-eeb6e178]{position:absolute;bottom:24px;right:24px}",""]),t.exports=r},393:function(t,e,n){"use strict";n.r(e);n(14),n(11),n(16),n(24),n(15),n(25);var r=n(4),o=n(22),c=n(109),l=n(86),f=(n(69),n(55),n(27),n(386)),d=n(381),v=n(367);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var O=Object(o.b)({setup:function(){var t=Object(v.a)(),e=t.freehandCanvasWidth,n=t.freehandCanvasHeight,r=Object(c.useStore)().settings,h={width:"".concat(e,"px"),height:"".concat(n,"px")},O=Object(o.a)((function(){return r.value.strokeColor})),C=Object(o.a)((function(){return{backgroundColor:r.value.backgroundColor}}));return m(m(m(m({},function(){var t=Object(c.useStore)(),e=t.setCurrentMark,n=t.updateCurrentMark,r=t.endMark;return{handlePointerDown:function(t){t.preventDefault(),e({type:t.pointerType,points:[[t.offsetX,t.offsetY,t.pressure]]})},handlePointerMove:function(t){t.preventDefault(),1===t.buttons&&n({type:t.pointerType,points:[[t.offsetX,t.offsetY,t.pressure]]})},handlePointerUp:function(t){t.preventDefault(),r()}}}()),function(){var t=Object(c.useStore)(),data=t.data,e=t.settings;return{strokes:Object(o.a)((function(){return data.value.marks.length<1&&data.value.currentMark.points.length<1?[]:[].concat(Object(l.a)(data.value.marks),[data.value.currentMark]).map((function(mark){return function(t){var e=[];if(t.length<3)return"";var n=t[t.length-3],r=t[t.length-2];e.push("M",n[0],n[1],"Q");for(var i=0;i<t.length;i++)e.push(n[0],n[1],(n[0]+r[0])/2,(n[1]+r[1])/2),n=r,r=t[i];return e.push("Z"),e.join(" ")}(Object(f.a)(mark.points,{size:e.value.size,thinning:e.value.thinning,smoothing:e.value.smoothing,streamline:e.value.streamline,simulatePressure:"pen"!==mark.type}))}))}))}}()),Object(d.c)()),{},{svgContainerStyle:h,svgStyle:C,strokeColor:O})}}),C=(n(387),n(49)),k=n(67),y=n.n(k),j=n(398),component=Object(C.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mx-auto svg-container",style:t.svgContainerStyle,attrs:{outlined:""}},[n("svg",{ref:"svgElement",style:t.svgStyle,on:{pointerdown:t.handlePointerDown,pointerup:t.handlePointerUp,pointermove:t.handlePointerMove}},[n("g",{attrs:{"stroke-width":"0",stroke:t.strokeColor,fill:t.strokeColor}},t._l(t.strokes,(function(t,e){return n("path",{key:e,attrs:{d:t}})})),0)])])}),[],!1,null,"16aed6a5",null);e.default=component.exports;y()(component,{VCard:j.a})},394:function(t,e,n){"use strict";n.r(e);var r=n(22),o=n(367),c=Object(r.b)({setup:function(){return{width:Object(o.a)().freehandCanvasWidth}}}),l=n(49),f=n(67),d=n.n(f),v=n(403),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-subheader",{staticClass:"mx-auto font-weight-bold",style:{width:t.width+"px"}},[t._t("default"),t._v(" "),n("span",{staticClass:"text-caption ml-1"},[t._t("caption")],2)],2)}),[],!1,null,null,null);e.default=component.exports;d()(component,{VSubheader:v.a})},395:function(t,e,n){"use strict";n.r(e);var r=n(22),o=n(369),c=n(370),l=n(109),f=n(367),d=Object(r.b)({components:{AppColorPicker:o.default,AppActiveColorPickerToggle:c.default},setup:function(){var t=Object(f.a)(),e=t.freehandCanvasWidth,n=t.freehandCanvasHeight,o=t.strokeOptions,c=Object(l.useStore)(),d=c.settings,v=c.settingsHasChanged,h=c.resetSettings,m={width:"".concat(e,"px"),height:"".concat(n,"px")},O=Object(r.a)({get:function(){return"stroke"===d.value.activeColorPicker?d.value.strokeColor:d.value.backgroundColor},set:function(t){return"stroke"===d.value.activeColorPicker?d.value.strokeColor=t:d.value.backgroundColor=t}});return{controlsContainerStyle:m,settings:d,settingsHasChanged:v,handleSettingReset:function(){return h()},color:O,strokeOptions:o}}}),v=(n(391),n(49)),h=n(67),m=n.n(h),O=n(353),C=n(398),k=n(424),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mx-auto controls-container pa-4",style:t.controlsContainerStyle,attrs:{color:"grey lighten-4",outlined:""}},[t._l(t.strokeOptions,(function(option,e){return n("div",{key:e},[n("label",{staticClass:"text-caption"},[t._v(t._s(option.title))]),t._v(" "),n("v-slider",{staticClass:"mt-n1",attrs:{dense:"","hide-details":"",step:option.step,min:option.min,max:option.max},model:{value:t.settings[option.key],callback:function(e){t.$set(t.settings,option.key,e)},expression:"settings[option.key]"}})],1)})),t._v(" "),n("label",{staticClass:"text-caption"},[t._v("線の色/背景色")]),t._v(" "),n("div",{staticClass:"d-flex justify-start"},[n("AppColorPicker",{model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),t._v(" "),n("div",[n("AppActiveColorPickerToggle",{staticClass:"ml-4 mt-4",model:{value:t.settings.activeColorPicker,callback:function(e){t.$set(t.settings,"activeColorPicker",e)},expression:"settings.activeColorPicker"}})],1)],1),t._v(" "),n("v-btn",{staticClass:"mx-auto setting-reset-button",attrs:{disabled:!t.settingsHasChanged},on:{click:t.handleSettingReset}},[t._v("設定をリセット")])],2)}),[],!1,null,"eeb6e178",null);e.default=component.exports;m()(component,{AppColorPicker:n(369).default,AppActiveColorPickerToggle:n(370).default}),m()(component,{VBtn:O.a,VCard:C.a,VSlider:k.a})},399:function(t,e,n){var content=n(423);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(33).default)("23d4da9b",content,!0,{sourceMap:!1})},422:function(t,e,n){"use strict";n(399)},423:function(t,e,n){var r=n(32)(!1);r.push([t.i,".settings-container[data-v-35c7c68f]{position:relative;width:400px;height:400px}",""]),t.exports=r},428:function(t,e,n){"use strict";n.r(e);var r=n(21),o=(n(89),n(22)),c=n(394),l=n(393),f=n(395),d=n(109),v=(n(17),n(27),n(367)),h=function(t){return new Promise((function(e,n){var image=new Image;image.addEventListener("load",(function(){return e(image)})),image.addEventListener("error",(function(t){return n(t)})),image.src=t}))},m=n(381),O=Object(o.b)({components:{AppSubheader:c.default,FreehandCanvas:l.default,AppearanceControls:f.default},setup:function(){Object(o.e)(m.a,Object(m.b)());var t,e,n,c,l,f,O,C=Object(d.useStore)(),k=C.dataHasChanged,y=C.resetData,j=(t=Object(v.a)(),e=t.freehandCanvasWidth,n=t.freehandCanvasHeight,c=t.outputImageWidth,l=t.outputImageHeight,f=t.outputImageExtension,O=t.outputImageDefaultName,{downloadPngFromSvg:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(svg){var r,canvas,o,d,image,v,m,C,k,a,y;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(new XMLSerializer).serializeToString(svg),(canvas=document.createElement("canvas")).width=e,canvas.height=n,o=canvas.getContext("2d"),d="data:image/svg+xml;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(r))),t.next=8,h(d);case 8:return image=t.sent,null==o||o.drawImage(image,0,0,e,n,0,0,100,100),v=canvas.toDataURL("image/png"),t.next=13,h(v);case 13:m=t.sent,(C=document.createElement("canvas")).width=c,C.height=l,null==(k=C.getContext("2d"))||k.drawImage(m,0,0,c,l,0,0,c,l),a=document.createElement("a"),y=C.toDataURL("image/".concat(f)),a.href=y,a.setAttribute("download","".concat(O,".").concat(f)),a.dispatchEvent(new MouseEvent("click"));case 24:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}).downloadPngFromSvg,w=Object(m.c)().svgElement;return{dataHasChanged:k,handlePngDownload:function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(w.value);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),handleClear:function(){return y()}}}}),C=(n(422),n(49)),k=n(67),y=n.n(k),j=n(353),w=n(425),x=n(366),_=n(426),component=Object(C.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",[n("v-col",[n("AppSubheader",{scopedSlots:t._u([{key:"default",fn:function(){return[t._v("🖋 手書き入力")]},proxy:!0},{key:"caption",fn:function(){return[t._v("\n          (クリックしたままカーソルを動かして線を描けます)\n        ")]},proxy:!0}])}),t._v(" "),n("FreehandCanvas")],1),t._v(" "),n("v-col",[n("AppSubheader",{scopedSlots:t._u([{key:"default",fn:function(){return[t._v("⚙️ 設定")]},proxy:!0},{key:"caption",fn:function(){return[t._v("\n          (お好みの見た目になるように先の太さや色を調整できます)\n        ")]},proxy:!0}])}),t._v(" "),n("AppearanceControls")],1)],1),t._v(" "),n("v-row",[n("v-col",[n("div",{staticClass:"d-flex justify-center mt-6"},[n("v-btn",{attrs:{outlined:"",disabled:!t.dataHasChanged},on:{click:function(e){return e.preventDefault(),t.handleClear(e)}}},[t._v("クリア")]),t._v(" "),n("v-btn",{staticClass:"ml-4",attrs:{disabled:!t.dataHasChanged,outlined:""},on:{click:function(e){return e.preventDefault(),t.handlePngDownload(e)}}},[t._v("保存")])],1)])],1)],1)}),[],!1,null,"35c7c68f",null);e.default=component.exports;y()(component,{AppSubheader:n(394).default,FreehandCanvas:n(393).default,AppearanceControls:n(395).default}),y()(component,{VBtn:j.a,VCol:w.a,VContainer:x.a,VRow:_.a})}}]);